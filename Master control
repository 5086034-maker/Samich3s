# master_control_gui.py
import re
import random
import tkinter as tk
from tkinter import scrolledtext

NAME = "Master Control"

RESPONSES = {
    'hello': [
        f"Greetings, I am {NAME}.",
        f"Hello there. {NAME} online.",
        f"{NAME} activated. Awaiting input."
    ],
    'how_are_you': [
        f"{NAME} is functioning within optimal parameters.",
        "All systems nominal.",
        "Diagnostic complete — no errors detected."
    ],
    'identity': [
        f"I am {NAME}, a simple Python AI construct.",
        "They call me Master Control, your assistant.",
        "This is Master Control — how may I serve?"
    ],
    'weather': [
        "Weather data unavailable — no network connection.",
        "I cannot feel the weather, only compute it.",
        "Simulated forecast: 100% chance of code."
    ],
    'default': [
        "Processing input… please elaborate.",
        "I do not have data on that, but I am learning.",
        "Clarify your command, user."
    ]
}

def classify(message):
    msg = message.lower()
    if re.search(r'\bhello|hi|hey\b', msg):
        return 'hello'
    if re.search(r'\bwho (are|r) you\b', msg) or NAME.lower() in msg:
        return 'identity'
    if re.search(r'\bhow are you|how’s it going\b', msg):
        return 'how_are_you'
    if re.search(r'\bweather|rain|sunny|temperature\b', msg):
        return 'weather'
    return 'default'

def reply(message):
    cls = classify(message)
    return random.choice(RESPONSES.get(cls, RESPONSES['default']))

# ----- GUI -----
def send_message(event=None):
    user_input = entry.get().strip()
    if not user_input:
        return
    chat_area.config(state='normal')
    chat_area.insert(tk.END, f"You: {user_input}\n")
    entry.delete(0, tk.END)
    
    if user_input.lower() in {'quit', 'exit'}:
        chat_area.insert(tk.END, f"{NAME}: Shutting down.\n")
        root.after(1000, root.destroy)
        return
    
    response = reply(user_input)
    chat_area.insert(tk.END, f"{NAME}: {response}\n")
    chat_area.config(state='disabled')
    chat_area.yview(tk.END)

# Tkinter window
root = tk.Tk()
root.title(NAME)

chat_area = scrolledtext.ScrolledText(root, wrap=tk.WORD, state='disabled', width=60, height=20)
chat_area.pack(padx=10, pady=10)

entry = tk.Entry(root, width=50)
entry.pack(side=tk.LEFT, padx=(10,0), pady=(0,10))
entry.bind("<Return>", send_message)

send_btn = tk.Button(root, text="Send", command=send_message)
send_btn.pack(side=tk.LEFT, padx=10, pady=(0,10))

root.mainloop()
